
<link rel="stylesheet" href="{{ 'component-search.css' | asset_url }}" media="print" onload="this.media='all'">
<noscript>{{ 'component-search.css' | asset_url | stylesheet_tag }}</noscript>
{%- if section.settings.enable_filtering or section.settings.enable_sorting -%}
  {{ 'base.css' | asset_url | stylesheet_tag }} 
  {{ 'component-facets.css' | asset_url | stylesheet_tag }}
  <script src="{{ 'global.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'facets.js' | asset_url }}" defer="defer"></script>
{%- endif -%}
<script src="{{ 'search-form.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'main-search.js' | asset_url }}" defer="defer"></script>
{%- liquid
  assign arr_terms = search.terms |split:'product_type:'
  assign search_terms = arr_terms[0] | strip 
  assign search_terms_filter = search_terms |split:'*'
  assign search_terms = search_terms_filter[0] | strip 
  assign product_type = arr_terms[1] | strip
-%}
{% assign sett_equal = settings.use_eq_height %}
{% assign image_ratio = settings.image_ratio %}
{% assign sid = section.id  %}
{% assign grid_list = section.settings.grid_list |plus:0 %}  
{% liquid
	if grid_list == 2 
    	assign class_style = "grid-2-style" 
    elsif grid_list == 3    
    	assign class_style = "grid-3-style"
    elsif grid_list == 4  
    	assign class_style = "grid-4-style"   
    elsif grid_list == 5   
    	assign class_style = "grid-5-style"
    elsif grid_list == 1  
    	assign class_style = "list-style" 
    endif    
%} 
<section id="laber_{{sid}}">
{% assign type="" %}

{% for item in search.results %}
    {% if item.object_type == 'article' %}
        {% assign type="article" %}
        {% break %}
    {% elsif item.object_type == 'page' %}
        <!--
        'item' is a page.
        All page object properties can be accessed.
        -->
        {% assign type="page" %}
        {% break %}
    {% elsif item.object_type == 'product' %}
        <!--
        'item' is a product.
        All product object properties can be accessed.
        -->
        {% assign type="product" %}
        {% break %}
  {% else %}
    {% assign type="" %}
    {% break %}
    {% endif %}
{% endfor %}
<div class="template-search{% unless search.performed and search.results_count > 0 %} template-search--empty{% endunless %} section-{{ section.id }}-padding">

  <div class="main-container shop-page">
      {% if search.results_count == 0 or search.performed == false %}
        <div class="container empty-page-content text-center">
          <h1 class="h2">{{ 'general.search.title' | t }}</h1>
      {% else %}
          <div class="container section-header text-center">
          <h1 class="section-title h2">{{ 'general.search.results_with_count' | t: terms: search_terms, count: search.results_count }}</h1>
      {% endif %}
      {% if search.performed and search.results_count == 0 %}
        <hr class="hr--small hr--invisible">
        <p>{{ 'general.search.no_results_html' | t: terms: search_terms }}</p>
      {% endif %}
    </div>
  </div>
  {% if search.performed %}
    <div class=" main-content-grid js_container_cat ">
    <div class="js_categories_content">
      <div class="container wrap-main-collection">
        <div class="row">
          <div class="mobile-content col">
          <div{% if section.settings.filter_type == 'vertical' %} class="facets-vertical page-width"{% endif %}>
            {%- if search.filters != empty -%}
              {%- if section.settings.enable_filtering or section.settings.enable_sorting -%}
                <aside aria-labelledby="verticalTitle" class="facets-wrapper{% unless section.settings.enable_filtering %} facets-wrapper--no-filters{% endunless %}{% if section.settings.filter_type != 'vertical' %} page-width{% endif %}" id="main-search-filters" data-id="{{ section.id }}">
                  {% render 'facets', results: search, enable_filtering: section.settings.enable_filtering, enable_sorting: section.settings.enable_sorting, filter_type: section.settings.filter_type %}
                </aside>
              {%- endif -%}
            {%- endif -%}
            <div class="product-grid-container js_products_arrivals products-arrivals {{ class_style }}" id="ProductGridContainer">
              <!-- Start YMM short code -->
{%- capture the_snippet_content -%} 
	{% render 'ymm-searchbox' %}{%- endcapture -%}
	{% unless the_snippet_content contains "Liquid error" %}
		{%- assign searchbox_style = "horizontal" -%}<!-- eg. horizontal or vertical -->
		{%- assign searchbox_title = "Search By Year, Make and Model" -%}
		{% render 'ymm-searchbox', searchbox_style: searchbox_style, searchbox_title: searchbox_title %}
{% endunless %}	
<!-- Ended YMM short code --> 

{%- assign is_sidebar = false -%}

<div class="page-width container{% if is_sidebar == true %} ymm-result-page{% endif %}">
{% if is_sidebar == true %}
<div class="sidebar">SIDE BAR FILE INCLUDE</div>
{% endif %}
<div class="ymm-grid">
    <div class="page-ymm-custom">
      <div class="section-header text-center">
        <h1 id="title" class="ymm_pg_title"></h1>
        <h4><span id="total_products"></span></h4>
      </div>
      <div class="ymm_content">
        	{{ page.content }}
        
        	{%- comment -%} DO NOT EDIT BELOW LINES [ PRODUCTS ARE WRITTEN IN THIS PART DYNAMICALLY ] {%- endcomment -%}
        	<div id="product_container" class="clearfix">
              <div class="ymm-prd-loader" style="display: none;"></div>
              <div id="products" class="grid search-result-ctm"></div>
              <div class="clearfix paging-outr"><ul class="pagination" id="paginate"></ul></div>
        	</div>
        	{%- comment -%} ENDS HERE {%- endcomment -%}
      </div>
    </div>
</div>
</div>
            </div>
        </div>
        </div>
        </div>
      </div>
    </div>
</div>
{% endif %}
</section>
{% render 'grid-style', settings:section.settings %}
{%- render 'section_style' -%}

{% if section.settings.enable_related_search %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var container = document.querySelector('#shuffled-collections-container');
    var collectionLinks = container.querySelectorAll('.related-search-btn');

    // Convert the NodeList to an array for easier manipulation
    var shuffledCollectionLinks = Array.from(collectionLinks);

    // Shuffle the array
    for (var i = shuffledCollectionLinks.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = shuffledCollectionLinks[i];
      shuffledCollectionLinks[i] = shuffledCollectionLinks[j];
      shuffledCollectionLinks[j] = temp;
    }

    // Display only the first 5 elements
    for (var i = 0; i < 5; i++) {
      shuffledCollectionLinks[i].style.display = 'inline-block'; // or 'block' depending on your styling
      container.appendChild(shuffledCollectionLinks[i]);
    }
  });
</script>
{% endif %}
{% schema %}
  {
    "name": "Product search",
  "class": "product_section",
    "settings": [ 
      {
        "type": "range",
        "id": "pagination_limit",
        "min": 1,
        "max": 48,
        "step": 1,
        "unit": "pds",
        "label": "Max number products",
        "info": "The number of products I have on a page",
        "default": 18
      },
      {
        "type": "select",
        "id": "grid_list",
        "default": "1",
        "options": [
          {
            "value": "2",
            "label": "Grid Two Column"
          },
          {
            "value": "3",
            "label": "Grid Three Column"
          },
          {
            "value": "4",
            "label": "Grid Four Column"
          },
          {
            "value": "5",
            "label": "Grid Five Column"
          },
          {
            "value": "1",
            "label": "List View"
          }
        ],
        "label": "Default Grid or List"
      },
        {
        "type": "header",
        "content": "---- Grid Show Collection ----"
    },    
    {  
        "type": "range",  
        "id": "visible",  
        "label": "Columns in Visible",
        "info": "Item(s) in screen ( Size >= 1920 )",
        "min": 1,
        "max": 8,
        "step": 1,
        "unit": "col",
        "default": 5 
    },
    {  
        "type": "range",  
        "id": "widescreen",  
        "label": "Columns in Widescreen",
        "info": "Item(s) in screen ( 1366 <= Size < 1920 )",
        "min": 1,
        "max": 8,
        "step": 1,
        "unit": "col",
        "default": 4 
    },  
    {  
        "type": "range",  
        "id": "desktop",  
        "label": "Columns in Desktop",
        "info":  "Item(s) in screen ( 1200 <= Size < 1480 )",
        "min": 1,
        "max": 8,
        "step": 1,
        "unit": "col",
        "default": 4  
    },    
    {  
        "type": "range",  
        "id": "laptop",  
        "label": "Columns in Laptop",
        "info": "Item(s) in screen ( 992 <= Size < 1200 )",
        "min": 1,
        "max": 8,
        "step": 1,
        "unit": "col",
        "default": 4
    },    
    {  
        "type": "range",  
        "id": "notebook",  
        "label": "Columns in Notebook",
        "info": "Item(s) in screen ( 768 <= Size < 992 )",
        "min": 1,
        "max": 8,
        "step": 1,
        "unit": "col",
        "default": 3  
    },  
    {  
        "type": "range",  
        "id": "tablet",  
        "label": "Columns in Tablet",
        "info": "Item(s) in screen ( 576 <= Size < 768 )",
        "min": 1,
        "max": 8,
        "step": 1,
        "unit": "col",
        "default": 3 
    },
    {  
        "type": "range",  
        "id": "landscape",  
        "label": "Columns in Landscape",
        "info": "Item(s) in screen ( 480 <= Size < 576 )",
        "min": 1,
        "max": 6,
        "step": 1,
        "unit": "col",
        "default": 2 
    }, 
    {  
        "type": "range",  
        "id": "portrait",  
        "label": "Columns in Portrait",
        "info": "Item(s) in screen ( 360 < Size < 480 )",
        "min": 1,
        "max": 6,
        "step": 1,
        "unit": "col",
        "default": 2 
    },
    {  
        "type": "range",  
        "id": "mobile",  
        "label": "Columns in Mobile",
        "info": "Item(s) in screen ( Size < = 360 )",
        "min": 1,
        "max": 4,
        "step": 1,
        "unit": "col",
        "default": 1 
    },
    {
      "type": "select",
      "id": "card_style",
      "label": "Card style",
      "options":[
        {
          "value": "style_1",
          "label": "Style 1"
        },
        {
          "value": "style_2",
          "label": "Style 2"
        }
      ],
      "default": "style_2"
    },
    {
        "type": "number",
        "id": "padding_lr",
        "label": "Padding left & right",
        "default": 10
    },
    {
      "type": "header",
      "content": "t:sections.main-collection-product-grid.settings.header__1.content"
    },
    {
      "type": "checkbox",
      "id": "enable_filtering",
      "default": true,
      "label": "t:sections.main-collection-product-grid.settings.enable_filtering.label",
      "info": "t:sections.main-collection-product-grid.settings.enable_filtering.info"
    },
    {
      "type": "select",
      "id": "filter_type",
      "options": [
        {
          "value": "horizontal",
          "label": "t:sections.main-collection-product-grid.settings.filter_type.options__1.label"
        },
        {
          "value": "vertical",
          "label": "t:sections.main-collection-product-grid.settings.filter_type.options__2.label"
        },
        {
          "value": "drawer",
          "label": "t:sections.main-collection-product-grid.settings.filter_type.options__3.label"
        }
      ],
      "default": "horizontal",
      "label": "t:sections.main-collection-product-grid.settings.filter_type.label",
      "info": "t:sections.main-collection-product-grid.settings.filter_type.info"
    },
    {
      "type": "checkbox",
      "id": "enable_sorting",
      "default": true,
      "label": "t:sections.main-collection-product-grid.settings.enable_sorting.label"
    },
    {
      "type": "checkbox",
      "id": "enable_related_search",
      "label": "Enable related search",
      "default": false
    },
    {
    "type": "header",
    "content": "== Setting PC"
    },
    {
    "type": "color",
    "id": "cl_bg",
    "label": "Background color",
    "default": "#fff"
    }, 
    {
    "type": "text",
    "id": "mg",
    "label": "Margin",
    "info":"Margin top, margin right, margin bottom, margin left. If you not use to blank"
    },
    {
    "type": "text",
    "id": "pd",
    "label": "Padding",
    "info":"Padding top, padding right, padding bottom, padding left. If you not use to blank"
    },
    {
    "type": "header",
    "content": "== Design Mobile Options"
    },
    {
    "type": "text",
    "id": "mg_mb",
    "label": "Margin"
    },
    {
    "type": "text",
    "id": "pd_mb",
    "label": "Padding"
    }
  ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}